<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="../libs/three.js"></script>
  <title>mateiral light</title>
</head>
<body>
  <div id="webgl-output"></div>
  <script>
    function init() {
      var scene = new THREE.Scene();  // 场景
      var camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000); // 相机
      var renderer = new THREE.WebGLRenderer(); // 渲染器

      // 设置场景的颜色和宽高
      renderer.setClearColor(new THREE.Color(0xEEEEEE, 1.0));
      renderer.setSize(window.innerWidth, window.innerHeight);
      console.dir(renderer);
      renderer.shadowMapType = THREE.PCFSoftShadowMap;
      renderer.shadowMapEnabled = true; // 渲染阴影，默认不会渲染阴影，需要手动设置
      
      // 创建坐标轴并加入场景中
      var axes = new THREE.AxisHelper(20);
      scene.add(axes);
      
      // 创建平面并加入场景中
      var planeGeometry = new THREE.PlaneGeometry(60, 20, 1, 1);  // 几何体
      var planeMaterial = new THREE.MeshBasicMaterial({color: 0xcccccc}); // 材质
      var plane = new THREE.Mesh(planeGeometry, planeMaterial);
      plane.receiveShadow = true;

      plane.rotation.x = -0.5 * Math.PI;
      plane.position.x = 15;
      plane.position.y = 0;
      plane.position.z = 0;
      scene.add(plane);
      
      var cubeGeometry = new THREE.BoxGeometry(4, 4, 4);
      var cubeMaterial = new THREE.MeshBasicMaterial({color: 0xff0000, wireframe: true});
      var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
      cube.castShadow = true;

      cube.position.x = -4;
      cube.position.y = 3;
      cube.position.z = 0;
      scene.add(cube);

      var sphereGeometry = new THREE.SphereGeometry(4, 20, 20);
      var sphereMaterial = new THREE.MeshBasicMaterial({color: 0x7777ff, wireframe: true});
      var sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
      sphere.castShadow = true;

      sphere.position.x = 20;
      sphere.position.y = 4;
      sphere.position.z = 2;
      scene.add(sphere);

      var spotLight = new THREE.SpotLight(0xffffff);
      spotLight.position.set( 100, 1000, 100 );
      spotLight.castShadow = true;
      // spotLight.shadow.mapSize.width = 1024;
      // spotLight.shadow.mapSize.height = 1024;

      // spotLight.shadow.camera.near = 500;
      // spotLight.shadow.camera.far = 4000;
      // spotLight.shadow.camera.fov = 30;
      scene.add(spotLight);
      
      // 设置相机位置
      camera.position.x = -30;
      camera.position.y = 40;
      camera.position.z = 30;
      
      camera.lookAt(scene.position);
      
      document.getElementById("webgl-output")
        .appendChild(renderer.domElement)
      renderer.render(scene, camera);
    }

    window.onload = init;
  </script>
</body>
</html>